@model IEnumerable<ManvarFitness.Entity.User>
<style>
    /* OFF state */
    .form-check-input {
        background-color: #ccc; /* gray when OFF */
        border-radius: 1rem; /* keep default Bootstrap rounded */
        transition: background-color 0.4s;
    }

        /* ON state */
        .form-check-input:checked {
            background-color: #FF7F11; /* orange when ON */
        }
</style>

<h1 class="fw-semibold mb-0" style="display: inline-block; color: #333; padding-bottom: 4px; border-bottom: 3px solid #FF7F11; border-radius: 2px;">Customers</h1>
<div class="container-fluid px-4">

    <br />
    <!-- Search & Filters -->
    <div class="row mb-3 g-2">
        <div class="col-lg-3 col-md-4">
            <input type="text" id="searchPlan"
                   class="form-control w-100"
                   placeholder="Search User..." />
        </div>

        <div class="col-lg-3 col-md-4">
            <select id="genderFilter" class="form-select">
                <option value="">Filter by Gender</option>
                <option value="male">Male</option>
                <option value="female">Female</option>
            </select>
        </div>
    </div>

    <!-- TABLE -->
    <div class="table-responsive">
        <table class="table table-striped table-bordered align-middle">
            <thead class="table-light">
                <tr>
                    <th>Name</th>
                    <th>Gender</th>
                    <th>Mobile</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var user in Model)
                {
                    <tr>
                        <td>@(string.IsNullOrEmpty(user.Name) ? "Not Updated" : user.Name)</td>
                        <td>@(string.IsNullOrEmpty(user.Gender) ? "Not Updated" : user.Gender)</td>
                        <td>@user.Mobile</td>
                        <td>
                            <div class="form-check form-switch m-0">
                                <input class="form-check-input"
                                       type="checkbox"
                                       role="switch"
                                       data-roleid="@user.UserId"
                                       id="switchRole@role.Id"
                                       @(user.IsActive ? "checked" : "") />
                                <label class="form-check-label" for="switchRole@role.Id"></label>
                            </div>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<script>
    const searchPlan = document.getElementById("searchPlan");
    const genderFilter = document.getElementById("genderFilter");
    const rows = document.querySelectorAll("table tbody tr");

    function filterUsers() {
        const searchText = searchPlan.value.toLowerCase();
        const genderValue = genderFilter.value.toLowerCase();

        rows.forEach(row =>{
            const genderText = row.children[5].innerText.toLowerCase();

            const matchesSearch = row.innerText.toLowerCase().includes(searchText);
            const matchesGender = !genderValue || genderText === genderValue;

            row.style.display =
                matchesSearch && matchesGender ? "" : "none";
        });
    }

    searchPlan.addEventListener("keyup", filterUsers);
    GenderFilter.addEventListener("change", filterUsers);
</script>
